[buildout]
extends =
    zope.cfg
    versions.cfg

parts =
    environment
    instance


[environment]
recipe = collective.recipe.environment


[instance]
recipe = plone.recipe.zope2instance
debug-mode = off

zserver-threads = ${environment:ZSERVER_THREADS}

event-log = ${buildout:directory}/var/log/event.log
event-log-level = ${environment:EVENT_LOG_LEVEL}

z2-log = ${buildout:directory}/var/log/Z2.log
z2-log-level = ${environment:Z2_LOG_LEVEL}

event-log-max-size = 10mb
event-log-old-files = 3
access-log-max-size = 10mb
access-log-old-files = 3

products = ${buildout:directory}/products
enable-product-installation = on

eggs +=
    zope.app.interface
    Products.ZSQLMethods
    Products.ZMySQLDA
    Products.LDAPUserFolder
    zope.globalrequest

products =
    ${buildout:directory}/products

environment-vars =
    PYTHON_EGG_CACHE ${buildout:directory}/var/egg-cache
    ACL_MANAGER_API_KEY bGzwEj8PlQESIDtnfpln

zcml-additional =
  extensions ${buildout:directory}/Extensions
  <configure xmlns="http://namespaces.zope.org/zope"
             xmlns:mail="http://namespaces.zope.org/mail">
    <mail:smtpMailer name="smtp" hostname="postfix" port="25" />
    <mail:directDelivery permission="zope.SendMail" mailer="smtp" />
  </configure>
